# План: Секция «Старт продаж» — приведение к эталону

## Эталонный макет
- **Скриншот:** приложен — блок «Старт продаж» с заголовком, кнопкой «Помощь с подбором», сеткой карточек ЖК
- **Секция:** LaunchSalesSection (start-sales-section)

## Цель
Привести блок «Старт продаж» к соответствию эталонному макету: шапка, сетка, карточки, типографика, hover, перелистывание фото, маршрутизация, мобильная версия.

**Затрагиваемые файлы:**
- `src/components/sections/LaunchSalesSection.jsx` — секция, шапка, кнопка, сетка, мобильная карусель
- `src/components/ui/ResidentialComplexCard.jsx` — карточка (текущая) или новый `LaunchSalesCard.jsx`
- Возможно: `src/components/ui/LaunchSalesCard.jsx` — отдельная карточка для «Старт продаж» (если вёрстка сильно отличается)

---

## TASK 1 — Шапка секции (десктоп)

**Текущее состояние:**
- LaunchSalesSection: только заголовок «Старт продаж», без кнопки

**Действия:**
- [x] Заголовок «Старт продаж» слева, крупный, жирный (`font-bold`)
- [x] Кнопка «Помощь с подбором» справа, выровнять в одну строку с заголовком (`flex justify-between items-center`)
- [x] Кнопка: синий фон (`bg-primary`), белый текст, аккуратный радиус (`rounded-xl`), нормальные padding, без «прыжков» при hover (без `scale` или минимальный)
- [ ] Внешние отступы секции `py-8 lg:py-10`, `mb-5 lg:mb-6` — чтобы блок «дышал»
- [ ] Куда ведёт кнопка: `/catalog?help=1` или отдельная страница подбора — уточнить по ТЗ

**Результат:** Заголовок и кнопка в одну строку, визуально как на макете.

---

## TASK 2 — Сетка карточек (десктоп)

**Текущее состояние:**
- `grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4`
- 3 карточки — мало для сетки 4 в ряд

**Действия:**
- [ ] Оставить/подтвердить: 4 карточки в ряд на широких экранах (`lg:grid-cols-4`)
- [ ] Равномерный gap (`gap-4 lg:gap-4` или по макету)
- [ ] Контейнер: `max-w-container mx-auto px-4` — ограничение ширины и центрирование
- [ ] Добавить 4‑ю карточку в данные, если нужно 4 (сейчас 3)
- [ ] Убедиться, что карточки одинаковой ширины, расстояния между ними ровные

**Результат:** 4 карточки в ряд на широких экранах, как на макете.

---

## TASK 3 — Карточка: изображение и радиусы (десктоп)

**Текущее состояние:**
- ResidentialComplexCard: `aspect-[4/3] min-h-[160px] sm:min-h-[180px] lg:min-h-[200px]`, `rounded-t-xl`
- Изображение внутри контейнера, `object-cover`

**Действия:**
- [ ] Картинка крупная, занимает значительную часть карточки
- [ ] Без рамок и лишней «карточной» подложки вокруг изображения
- [ ] Радиус скругления заметный (`rounded-t-xl`), без артефактов
- [ ] `object-fit: cover`, изображение не тянется
- [ ] Возможно увеличить `min-h` на lg, если по макету фото выше

**Результат:** Верх карточки — большая фотка со скруглением, без лишних рамок.

---

## TASK 4 — Плашка-тег и иконка избранного (десктоп)

**Текущее состояние:**
- Две плашки: «Новостройка» + первый тег из `tags` (например «Старт продаж»)

**Действия:**
- [x] **Одна** плашка «Старт 2 кв. 2026» / «Старт 2 кв. 2027» (формат capsule)
- [ ] Убрать «Новостройка» и вторую плашку
- [ ] Добавить в данные поле `launchTag: 'Старт 2 кв. 2026'` или вычислять из `tags`
- [ ] Стили плашки: фон белый, текст тёмный, большой радиус, аккуратные padding (`px-3 py-1 rounded-full` или `rounded-lg`)
- [ ] Иконка сердца: правильный размер (`w-9 h-9`), отступы от краёв (`top-2 right-2`), кликабельная зона ≥ 44px (touch target)
- [ ] Сердце не наезжает на плашку

**Результат:** На картинке одна плашка «Старт …», справа — сердце.

---

## TASK 5 — Точки слайдера на фото (десктоп)

**Текущее состояние:**
- ResidentialComplexCard: точки `bg-white` / `bg-white/50` внизу по центру
- Отображаются только при `hasMultipleImages`

**Действия:**
- [ ] Активная точка — синяя (`bg-primary`), неактивные — серые/белые полупрозрачные (как в макете)
- [ ] Overlay на фото, не сдвигает контент
- [ ] При одном фото — индикатор скрыт (уже реализовано)

**Результат:** Точки как на макете, активная подсвечена синим.

---

## TASK 6 — Типографика и строки (десктоп)

**Текущее состояние:**
- Строка 1: `h3` (название)
- Строка 2: `priceFrom`
- Строка 3: `apartmentsCount`
- Кнопка «Подробнее»

**Действия:**
- [ ] **Первая строка:** слева название («КП Черкизово»), справа цена («от 16.6 млн ₽») — в одну линию (`flex justify-between items-baseline`)
- [ ] **Вторая строка:** описание 1–2 строки (например «Комплекс будет расположен в новом районе Москвы с развитой инфраструктурой») — `text-gray-medium text-xs leading-relaxed line-clamp-2`
- [ ] Добавить в данные поле `description` (если нужно по макету) или использовать `apartmentsCount` как описание
- [ ] «Подробнее» — синяя ссылка (`text-primary text-sm font-medium hover:underline`), не кнопка
- [ ] Убрать/скрыть раскрывающийся блок квартир для секции «Старт продаж» (по макету его нет)
- [ ] Отступы от фото: `p-3 pt-2.5`, `space-y-1.5` между элементами

**Результат:** Название + цена в строку, описание ниже, «Подробнее» как ссылка.

---

## TASK 7 — Hover и анимации (десктоп)

**Текущее состояние:**
- `hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200 ease-out`
- Изображение без zoom

**Действия:**
- [ ] Hover карточки: лёгкий подъём (`-translate-y-0.5`), мягкая тень, без резких скачков
- [ ] Hover на фото: лёгкий zoom (`group-hover:scale-105`), плавный переход
- [ ] Переходы только на `transform`, `opacity`, `box-shadow` (без перерасчёта layout)
- [ ] `will-change: transform` при необходимости, `transition-duration-200 ease-out`
- [ ] `isolate` на карточке, чтобы тень не влияла на соседей

**Результат:** Плавные анимации, без дерганий, современный вид.

---

## TASK 8 — Перелистывание фото при наведении (десктоп)

**Текущее состояние:**
- ResidentialComplexCard: `handleImageMouseMove` с debounce, зоны left/middle/right по `rect.width`

**Действия:**
- [ ] При наведении: курсор влево/вправо — переключение фото
- [ ] Пороги зон (например 3 зоны: x < 0.33 → prev, x > 0.67 → next)
- [ ] Не вызывать `setState` на каждый пиксель — debounce или зоны
- [ ] Индикатор (точки) синхронизирован с текущим фото
- [ ] На touch: свайп по фото (уже есть)
- [ ] Без «скачков» высоты при смене фото (уже обеспечено `aspect-[4/3]`)

**Результат:** Фото листается при движении курсора, на мобилке — свайпом.

---

## TASK 9 — Клики и маршрутизация (десктоп)

**Текущее состояние:**
- Клик по карточке → `navigate(/new-building/${id})`
- «Подробнее» → тот же переход
- Сердце → toggle избранного (не навигация)

**Действия:**
- [ ] Клик по карточке/фото/названию → страница новостройки `/new-building/:id`
- [ ] «Подробнее» → тот же переход
- [ ] Сердце: только toggle избранного, `stopPropagation` (уже есть)
- [ ] Убедиться, что нет конфликтов (сердце не открывает карточку)

**Результат:** Карточка ведёт в ЖК, сердце — отдельно.

---

## TASK 10 — Мобильная версия

**Текущее состояние:**
- Grid: `grid-cols-1` на mobile — карточки вертикально
- Нет горизонтальной карусели

**Действия:**
- [ ] Заголовок «Старт продаж» сверху слева
- [ ] Кнопка «Помощь с подбором»: справа в строке (если помещается) или ниже — аккуратно, по ширине
- [ ] Карточки: горизонтальный скролл (Swiper или overflow-x + snap)
- [ ] 1 карточка почти целиком + небольшой «хвост» следующей (`slidesPerView: 0.85`, `centeredSlides`)
- [ ] Snap-поведение при листании
- [ ] Карточка: крупное фото, плашка «Старт …», сердце, точки слайдера
- [ ] Тексты: название + цена, описание 1–2 строки, «Подробнее»
- [ ] Нет переполнения по ширине, одинаковые отступы по краям (`px-4`)

**Результат:** На телефоне — карусель карточек, всё читабельно, свайп фото работает.

---

## Порядок реализации

### Фаза 1 — Шапка и сетка
1. **TASK 1** — Шапка: заголовок + кнопка «Помощь с подбором»
2. **TASK 2** — Сетка: 4 карточки в ряд, gap, контейнер

### Фаза 2 — Карточка: визуал
3. **TASK 3** — Изображение и радиусы
4. **TASK 4** — Плашка (одна «Старт …») и иконка избранного
5. **TASK 5** — Точки слайдера (активная — синяя)
6. **TASK 6** — Типографика: название+цена в строку, описание, «Подробнее» как ссылка

### Фаза 3 — Поведение
7. **TASK 7** — Hover-анимации
8. **TASK 8** — Перелистывание фото при hover (проверить/доработать)
9. **TASK 9** — Клики и маршрутизация (проверить)

### Фаза 4 — Мобильная
10. **TASK 10** — Мобильный layout: карусель, шапка, snap

---

## Важно

- **ResidentialComplexCard** используется в `LaunchSalesSection` и `ResidentialComplexSection`. Изменения должны учитывать оба контекста. Варианты:
  - Добавить проп `variant: 'launch' | 'default'` — разные layout/теги/описание
  - Или создать отдельный `LaunchSalesCard.jsx` для секции «Старт продаж»
- По макету: одна плашка «Старт 2 кв. 2026», описание вместо блока квартир — это отличия от «Каталог ЖК». Рекомендуется `LaunchSalesCard` или `variant="launch"`.
- Данные: добавить `launchTag`, `description` в объекты комплексов для LaunchSalesSection.
