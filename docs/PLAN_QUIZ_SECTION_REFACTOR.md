# План: Секция квиза «Подберем объект под Ваш запрос» — приведение к эталону

## Эталонный макет
- **Скриншот:** приложен — квиз с выбором типов недвижимости, синий CTA-блок справа
- **Секция:** QuizSection

## Цель
Привести блок квиза к соответствию эталонному макету и добавить multi-select логику.

**Затрагиваемый файл:**
- `src/components/sections/QuizSection.jsx`

---

## TASK 4.1 — Общая сетка блока

**Текущее состояние:**
- `rounded-lg border border-gray-light/40 bg-white shadow-sm flex flex-col lg:flex-row overflow-hidden`
- Левая часть: `flex-1 p-5 lg:p-6`
- Правая CTA: `lg:w-[260px] p-5 lg:p-6`

**Действия:**
- [ ] Привести ширину и внутренние отступы к эталону
- [ ] Убрать визуальный перекос между левым контентом и правым CTA-блоком
- [ ] Проверить vertical-align элементов внутри блока
- [ ] Блок должен выглядеть как единая карточка

**Результат:** Блок визуально цельный, симметричный, без ощущения «двух разных секций».

---

## TASK 4.2 — Заголовок и подзаголовок

**Текущее состояние:**
- Заголовок: `text-xl lg:text-2xl font-bold mb-1`
- Подзаголовок: `text-gray-medium text-sm mb-5`

**Действия:**
- [ ] Заголовок: крупнее и жирнее (text-2xl lg:text-3xl)
- [ ] Подзаголовок: ослабить контраст (text-gray-medium/90)
- [ ] Проверить line-height — убрать сжатость строк
- [ ] Увеличить отступ между заголовком и карточками (mb-5 → mb-6)

**Результат:** Заголовок доминирует, подзаголовок читается легко, блок «дышит».

---

## TASK 4.3 — Карточки типов недвижимости (layout)

**Текущее состояние:**
- `grid grid-cols-2 sm:grid-cols-3 gap-2 lg:gap-3`
- `min-h-[100px] lg:min-h-[120px]`
- `flex flex-col items-center justify-end`
- `p-3`

**Действия:**
- [ ] Одинаковая высота карточек (auto-rows-fr или min-h)
- [ ] Выровнять иконку и текст строго по центру
- [ ] Убрать ощущение «прилипшего» чекбокса — добавить отступы
- [ ] Одинаковые внутренние padding у всех карточек

**Результат:** Карточки как единый компонент, без визуального шума.

---

## TASK 4.4 — Активное состояние карточки

**Текущее состояние:**
- Selected: `bg-primary border-primary text-white`
- Unselected: `bg-white border-gray-light`

**Действия:**
- [ ] Selected: более насыщенный фон, outline или shadow
- [ ] Иконка и текст — белые / контрастные
- [ ] Иконка: при необходимости brightness/tint для читаемости на синем фоне
- [ ] Убрать ощущение «залитого прямоугольника»
- [ ] Состояние читаемо даже без чекбокса

**Результат:** Активный выбор понятен с первого взгляда.

---

## TASK 4.5 — Иконки типов недвижимости

**Текущее состояние:**
- `max-h-[50px] lg:max-h-[60px] w-auto object-contain`
- Разные изображения: category-doma, category-kvartiry и т.д.

**Действия:**
- [ ] Привести все иконки к единому стилю (3D / изометрия)
- [ ] Убрать разные масштабы и перспективы
- [ ] Центрировать иконки относительно карточки
- [ ] Проверить резкость — часть иконок может быть мягче других

**Результат:** Иконки визуально из одного набора.

---

## TASK 4.6 — Чекбоксы

**Текущее состояние:**
- `w-4 h-4 rounded flex items-center justify-center`
- Selected: `bg-white/90 text-primary` + CheckIcon
- Unselected: `border border-gray-medium`

**Действия:**
- [ ] Единый размер чекбоксов
- [ ] Выровнять чекбокс относительно текста
- [ ] Убрать ощущение «плавающего» чекбокса
- [ ] Активное состояние сделать мягче (без резкого контраста)

**Результат:** Чекбоксы аккуратные, не перетягивают внимание.

---

## TASK 4.7 — Нижняя навигация (шаги + кнопки)

**Текущее состояние:**
- Индикатор шагов: `flex items-center gap-1 mb-5`
- Кнопки: `flex items-center gap-2`, Button `size="sm"`

**Действия:**
- [ ] Выровнять индикатор шагов по центру относительно кнопок
- [ ] Увеличить кликабельную область кнопок (h-10 → h-11)
- [ ] Кнопка «Назад» — вторичная, менее контрастная
- [ ] Кнопка «Следующий» — основной CTA

**Результат:** Навигация читается интуитивно.

---

## TASK 4.8 — Правый CTA-блок (синий)

**Текущее состояние:**
- `lg:w-[260px] bg-primary p-5 lg:p-6`
- `flex flex-col items-center justify-center text-center`

**Действия:**
- [ ] Привести ширину к эталону
- [ ] Центрировать иконку часов вертикально
- [ ] Иллюстрацию опустить ниже, чтобы не «висела»
- [ ] Проверить, чтобы текст не прижимался к краям

**Результат:** CTA-блок премиальный, не давит на контент.

---

## TASK 4.9 — Иконка часов

**Текущее состояние:**
- `w-14 h-14 rounded-full bg-white/20`, ClockIcon 40×40

**Действия:**
- [ ] Увеличить иконку (w-16 h-16 или w-20 h-20)
- [ ] Сделать более контрастной (bg-white/30 или ярче)
- [ ] Выровнять строго по центру относительно текста
- [ ] Убрать ощущение случайного размещения

**Результат:** Иконка усиливает смысл «за 5 минут».

---

## TASK 4.10 — Финальная визуальная сверка

**Действия:**
- [ ] Сравнить с эталоном: радиусы, отступы, визуальный вес
- [ ] Исправить расхождения до 100%

**Результат:** Блок визуально не отличим от эталона.

---

## TASK 4.11 — Multi-select логика выбора

**Текущее состояние:**
- `answers.type` — одно значение (single-select)
- `handleSelect` перезаписывает: `{ [stepId]: value }`
- При выборе — авто-переход на следующий шаг

**Действия:**
- [ ] Разрешить выбор нескольких опций (selectedTypes: string[])
- [ ] При клике: toggle selected (true/false), не сбрасывать другие
- [ ] Хранить массив: `answers.type = ['house', 'apartment']`
- [ ] Не переходить автоматически на следующий шаг при multi-select

**Результат:** Пользователь может отметить 2+ вариантов, повторный клик снимает выбор.

---

## TASK 4.12 — Клик по всей карточке + синхронный чекбокс

**Текущее состояние:**
- Вся карточка — `<button>`, кликабельна ✓
- При клике вызывается `handleSelect`

**Действия:**
- [ ] Убедиться: `cursor: pointer` на всей карточке
- [ ] При клике: toggle selected, чекбокс синхронно обновляется
- [ ] Чекбокс не единственная зона клика (всё ок, карточка — button)

**Результат:** Клик в любой точке карточки выбирает/снимает выбор.

---

## TASK 4.13 — Визуальный стиль selected-состояния

**Текущее состояние:**
- Selected: `bg-primary border-primary text-white`
- Checkbox: `bg-white/90 text-primary` + галочка

**Действия:**
- [ ] Selected: фон синий (brand blue), текст белый
- [ ] Иконка: сохранить читаемость (brightness-0 invert для белых иконок или filter)
- [ ] Чекбокс: активный (галочка на белом/синем фоне)
- [ ] Unselected: белый фон, обычный текст

**Результат:** Выбранная карточка явно выделена синим, всё читается.

---

## TASK 4.14 — Анимация переключения

**Текущее состояние:**
- `transition-all duration-200`

**Действия:**
- [ ] Плавный transition: background-color, color, border-color, box-shadow
- [ ] Длительность 180–220ms, easing: ease-out
- [ ] Исключить тяжёлые анимации (filter на больших картинках)

**Результат:** Переключение плавное, без дерганий.

---

## TASK 4.15 — Доступность и поведение

**Текущее состояние:**
- Карточки — `<button type="button">`
- Нет aria-pressed / aria-selected
- Фокус — стандартный ring

**Действия:**
- [ ] Добавить `aria-pressed={isSelected}` или `aria-selected={isSelected}`
- [ ] Поддержать Enter/Space при фокусе (button уже поддерживает)
- [ ] Фокус-обводка: `focus:ring-2 focus:ring-primary focus:ring-offset-2`

**Результат:** Компонент доступен и удобен для клавиатуры.

---

## Порядок реализации

### Фаза 1 — Layout и типографика
1. **4.1** — Общая сетка блока
2. **4.2** — Заголовок и подзаголовок
3. **4.3** — Карточки (layout)
4. **4.6** — Чекбоксы

### Фаза 2 — CTA и навигация
5. **4.7** — Нижняя навигация
6. **4.8** — Правый CTA-блок
7. **4.9** — Иконка часов

### Фаза 3 — Состояния и логика
8. **4.11** — Multi-select логика
9. **4.12** — Клик по карточке (уже есть, проверить)
10. **4.4** — Активное состояние
11. **4.13** — Стиль selected
12. **4.5** — Иконки (при необходимости)

### Фаза 4 — Полировка
13. **4.14** — Анимация
14. **4.15** — Доступность
15. **4.10** — Финальная сверка

---

## Важно

- **4.11** меняет структуру данных: `answers.type` из `string` в `string[]`. Учесть при переходе между шагами и при отправке результата.
- Иконки — внешние PNG; для 4.5 может потребоваться замена или CSS-фильтры для единообразия.
- TASK 4.4 и 4.13 частично перекрываются — объединить при реализации.
