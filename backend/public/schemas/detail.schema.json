{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://api.trendagent.local/schemas/detail.schema.json",
  "title": "TrendAgent Detail Response",
  "description": "Стандартный ответ детальной страницы для всех типов объектов недвижимости",
  "type": "object",
  "required": ["data", "meta"],
  "properties": {
    "data": {
      "type": "object",
      "description": "Детальная информация об объекте",
      "required": ["id"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Уникальный идентификатор объекта"
        },
        "guid": {
          "type": "string",
          "description": "GUID объекта"
        },
        "name": {
          "type": "string",
          "description": "Название объекта"
        },
        "slug": {
          "type": "string",
          "description": "URL-friendly идентификатор"
        },
        "description": {
          "type": ["string", "null"],
          "description": "Полное описание"
        },
        "price": {
          "type": ["object", "null"],
          "description": "Информация о цене",
          "properties": {
            "value": {
              "type": "number",
              "minimum": 0
            },
            "currency": {
              "type": "string",
              "enum": ["RUB", "USD", "EUR"]
            },
            "formatted": {
              "type": "string"
            }
          }
        },
        "area": {
          "type": ["object", "null"],
          "description": "Информация о площади",
          "properties": {
            "value": {
              "type": "number",
              "minimum": 0
            },
            "unit": {
              "type": "string",
              "enum": ["м²", "га", "сот"]
            },
            "formatted": {
              "type": "string"
            }
          }
        },
        "location": {
          "type": ["object", "null"],
          "description": "Местоположение",
          "properties": {
            "coordinates": {
              "type": ["object", "null"],
              "properties": {
                "lat": {
                  "type": "number",
                  "minimum": -90,
                  "maximum": 90
                },
                "lng": {
                  "type": "number",
                  "minimum": -180,
                  "maximum": 180
                }
              }
            },
            "address": {
              "type": ["string", "null"]
            },
            "district": {
              "type": ["string", "null"]
            },
            "metro": {
              "type": ["array", "null"],
              "items": {
                "type": "object"
              }
            }
          }
        },
        "created_at": {
          "type": ["string", "null"],
          "format": "date-time"
        },
        "updated_at": {
          "type": ["string", "null"],
          "format": "date-time"
        }
      }
    },
    "media": {
      "type": "object",
      "description": "Медиа контент",
      "properties": {
        "photos": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "videos": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "documents": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "plans": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "progress": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "has_content": {
          "type": "boolean"
        }
      }
    },
    "related": {
      "type": ["object", "null"],
      "description": "Связанные объекты",
      "additionalProperties": true
    },
    "meta": {
      "type": "object",
      "description": "Метаданные",
      "required": ["object_type", "id"],
      "properties": {
        "object_type": {
          "type": "string",
          "enum": [
            "blocks",
            "apartments",
            "parking",
            "houses",
            "plots",
            "commerce",
            "house_projects",
            "villages"
          ]
        },
        "id": {
          "type": "string"
        },
        "is_complete": {
          "type": "boolean",
          "description": "Все ли данные успешно загружены"
        },
        "failed_endpoints": {
          "type": "array",
          "description": "Список неудачных endpoint'ов при агрегации",
          "items": {
            "type": "string"
          }
        },
        "dictionaries_used": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    }
  }
}
