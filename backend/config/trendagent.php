<?php

return [

    /*
    |--------------------------------------------------------------------------
    | TrendAgent API Configuration
    |--------------------------------------------------------------------------
    |
    | Конфигурация для интеграции с TrendAgent API
    |
    */

    'api' => [
        /*
        |--------------------------------------------------------------------------
        | API Base URLs
        |--------------------------------------------------------------------------
        |
        | Базовые URL для различных API доменов TrendAgent
        | Конфигурируется автоматически через ObjectTypeResolver
        |
        */
        'domains' => [
            'main' => env('TRENDAGENT_API_DOMAIN', 'api.trendagent.ru'),
            'parkings' => env('TRENDAGENT_PARKINGS_DOMAIN', 'parkings-api.trendagent.ru'),
            'house' => env('TRENDAGENT_HOUSE_DOMAIN', 'house-api.trendagent.ru'),
            'commerce' => env('TRENDAGENT_COMMERCE_DOMAIN', 'commerce-api.trendagent.ru'),
            'apartment' => env('TRENDAGENT_APARTMENT_DOMAIN', 'apartment-api.trendagent.ru'),
            'sso' => env('TRENDAGENT_SSO_DOMAIN', 'sso-api.trend.tech'),
            'video' => env('TRENDAGENT_VIDEO_DOMAIN', 'video.trendagent.ru'),
            'files' => env('TRENDAGENT_FILES_DOMAIN', 'files.trendagent.ru'),
        ],

        /*
        |--------------------------------------------------------------------------
        | API Timeout
        |--------------------------------------------------------------------------
        |
        | Таймаут для HTTP запросов в секундах
        |
        */
        'timeout' => env('TRENDAGENT_API_TIMEOUT', 30),

        /*
        |--------------------------------------------------------------------------
        | API Version
        |--------------------------------------------------------------------------
        |
        | Версия API для основного домена
        |
        */
        'version' => env('TRENDAGENT_API_VERSION', 'v4_29'),
    ],

    /*
    |--------------------------------------------------------------------------
    | Authentication
    |--------------------------------------------------------------------------
    |
    | Настройки для авторизации через SSO
    |
    */
    'auth' => [
        /*
        |--------------------------------------------------------------------------
        | SSO Credentials
        |--------------------------------------------------------------------------
        |
        | Учётные данные для получения auth_token
        |
        */
        'client_id' => env('TRENDAGENT_CLIENT_ID', '66d84f584c0168b8ccd281c3'),
        'client_secret' => env('TRENDAGENT_CLIENT_SECRET', ''),
        
        /*
        |--------------------------------------------------------------------------
        | Token Lifetime
        |--------------------------------------------------------------------------
        |
        | Время жизни токена в секундах (~5 минут)
        |
        */
        'token_lifetime' => env('TRENDAGENT_TOKEN_LIFETIME', 300),
        
        /*
        |--------------------------------------------------------------------------
        | Refresh Before
        |--------------------------------------------------------------------------
        |
        | Обновлять токен за N секунд до истечения
        |
        */
        'refresh_before' => env('TRENDAGENT_REFRESH_BEFORE', 60),
    ],

    /*
    |--------------------------------------------------------------------------
    | Cache Configuration
    |--------------------------------------------------------------------------
    |
    | Настройки кэширования для справочников и маппингов
    |
    */
    'cache' => [
        /*
        |--------------------------------------------------------------------------
        | Cache Driver
        |--------------------------------------------------------------------------
        |
        | Драйвер кэша (file, redis, memcached, array)
        | Использует дефолтный драйвер Laravel если не указан
        |
        */
        'driver' => env('TRENDAGENT_CACHE_DRIVER', null),

        /*
        |--------------------------------------------------------------------------
        | TTL Configuration
        |--------------------------------------------------------------------------
        |
        | Время жизни кэша для различных типов данных
        |
        */
        'ttl' => [
            'dictionaries' => env('TRENDAGENT_CACHE_DICTIONARIES_TTL', 86400), // 24 часа
            'slug_maps' => env('TRENDAGENT_CACHE_SLUG_MAPS_TTL', 3600),        // 1 час
            'auth_token' => env('TRENDAGENT_CACHE_AUTH_TOKEN_TTL', 300),       // 5 минут
        ],

        /*
        |--------------------------------------------------------------------------
        | Cache Prefix
        |--------------------------------------------------------------------------
        |
        | Префикс для всех ключей кэша TrendAgent
        |
        */
        'prefix' => env('TRENDAGENT_CACHE_PREFIX', 'trendagent:'),
    ],

    /*
    |--------------------------------------------------------------------------
    | Retry Configuration
    |--------------------------------------------------------------------------
    |
    | Настройки повторных попыток для failed запросов
    |
    */
    'retry' => [
        /*
        |--------------------------------------------------------------------------
        | Max Attempts
        |--------------------------------------------------------------------------
        |
        | Максимальное количество попыток
        |
        */
        'max_attempts' => env('TRENDAGENT_RETRY_MAX_ATTEMPTS', 3),

        /*
        |--------------------------------------------------------------------------
        | Initial Delay
        |--------------------------------------------------------------------------
        |
        | Начальная задержка перед первым retry (миллисекунды)
        |
        */
        'initial_delay_ms' => env('TRENDAGENT_RETRY_INITIAL_DELAY_MS', 1000),

        /*
        |--------------------------------------------------------------------------
        | Max Delay
        |--------------------------------------------------------------------------
        |
        | Максимальная задержка (миллисекунды)
        |
        */
        'max_delay_ms' => env('TRENDAGENT_RETRY_MAX_DELAY_MS', 10000),
    ],

    /*
    |--------------------------------------------------------------------------
    | Default City
    |--------------------------------------------------------------------------
    |
    | ID города по умолчанию (Санкт-Петербург)
    |
    */
    'default_city' => env('TRENDAGENT_DEFAULT_CITY', '58c665588b6aa52311afa01b'),

    /*
    |--------------------------------------------------------------------------
    | Default Language
    |--------------------------------------------------------------------------
    |
    | Язык по умолчанию для API запросов
    |
    */
    'default_lang' => env('TRENDAGENT_DEFAULT_LANG', 'ru'),

    /*
    |--------------------------------------------------------------------------
    | Pagination
    |--------------------------------------------------------------------------
    |
    | Настройки пагинации по умолчанию
    |
    */
    'pagination' => [
        'default_page_size' => env('TRENDAGENT_PAGE_SIZE', 20),
        'max_page_size' => env('TRENDAGENT_MAX_PAGE_SIZE', 100),
    ],

    /*
    |--------------------------------------------------------------------------
    | Logging
    |--------------------------------------------------------------------------
    |
    | Настройки логирования для API запросов
    |
    */
    'logging' => [
        'enabled' => env('TRENDAGENT_LOGGING_ENABLED', true),
        'channel' => env('TRENDAGENT_LOG_CHANNEL', 'stack'),
        'log_requests' => env('TRENDAGENT_LOG_REQUESTS', false),
        'log_responses' => env('TRENDAGENT_LOG_RESPONSES', false),
    ],

];
